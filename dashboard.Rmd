---
title: "Project #3: Escapades in Market Risk"
author:
- Nicolas Schoonmaker
- Guillermo Delgado
- Katie Guillen
- Leanne Harper
date: "`r format(Sys.time(), '%m/%d/%Y')`"
output: flexdashboard::flex_dashboard
subtitle: 'Lastname-Firstname_Project3'
header-includes:
- \usepackage{fancyhdr}
- \pagestyle{fancy}
- \fancyhead[CO,CE]{\thetitle}
- \fancyfoot[CO,CE]{Copyright 2018, William G. Foote}
- \fancyhead[RE,RO]{\thepage}
- \renewcommand{\footrulewidth}{0.5pt}
---

```{r include=FALSE}
# ----------------------- Setup section -------------------------
```

```{r Packages and Installers}
# Install RTools
# https://cran.rstudio.com/bin/windows/Rtools/
#
# Restart R Studio
#
# Install packages
#install.packages("dplyr")
#install.packages("rstudioapi")
#install.packages("tinytex")
#install.packages("magick")
#install.packages("plotly")
#install.packages("xts")
#install.packages("ggplot2")
#install.packages("moments")
#install.packages("matrixStats")
#install.packages("quantreg")
#install.packages("flexdashboard")
#install.packages("QRM")
#install.packages("qrmdata")
```

```{r Library Includes}
# The list of libraries to include
library(stats)
library(dplyr)
library(rstudioapi)
library(flexdashboard)
```

```{r Get current directory}
# Get the directory so we can run this from anywhere
# Get the script directory from R when running in R
if(rstudioapi::isAvailable())
{
  print("Running in RStudio")
  script.path <- rstudioapi::getActiveDocumentContext()$path
  (script.path)
  script.dir <- dirname(script.path)
}
if(!exists("script.dir"))
{
  print("Running from command line")
  script.dir <- getSrcDirectory(function(x) {x})
}
(script.dir)
```

```{r Working Directory and Data setup}
# Set my working directory
# There is a "data" folder here with the files and the script
setwd(script.dir)
# Double check the working directory
getwd()
# Error check to ensure the working directory is set up and the data
# directory exists inside it.  Its required for this file
if(dir.exists(paste(getwd(),"/data", sep = "")) == FALSE) {
  stop("Data directory does not exist. Make sure the working directory
       is set using setwd() and the data folder exists in it.")
} else {
  print("Working directory and data set up correctly")
}
```

```{r include=FALSE}
# ----------------------- Background section -------------------------
```

Background {data-orientation=columns}
=====================================  
    
Column {data-width=600}
-------------------------------------
    
### Problem

[Problem statement]

### Additional details

[project resources and info]
Using RMD from: https://wgfoote.github.io/fin-alytics/HTML/PR03_market-risk.html  
Our code is on github at: https://github.com/nschoonm/FIN654-Project3

### Key business questions

[business questions]

Column {data-width=400}
-------------------------------------
   
### Getting a response: More detailed questions

[Detailed questions]

```{r include=FALSE}
# --------------------- Data Exploration section -----------------------
```

Data Exploration {data-orientation=rows}
=====================================     
   
Row {data-height=600}
-------------------------------------

### Graphs

Metals Market Percent Changes
```{r}
# Add graphs
```
<br/><br/>

Metals Market Percent Changes - Size  
```{r}
# Add graph of size
```
   
### Data

Descriptive Statistics
```{r}
# Add min/1st qu/median/srd qu/max of nickel/copper/alum
```
<br/><br/>

Data Moments
```{r}
# Output the copper.size, alum.size, nickel.dir and copper.dir
# this should be mean, median, std_dev, IQR, skewness, kurtosis
```

Row {data-height=400}
-------------------------------------
    
### Data Insights

[Add data insights from graphs and data]
<br/><br/>

[Talk abut time frame, volatility, correlation, skewness andkurtosis]


```{r include=FALSE}
# --------------------- Volatility section -----------------------
```

Volatility {data-orientation=rows}
=====================================     
   
Row {data-height=300}
-------------------------------------

### Returns % change - ACF

Returns % change - ACF
```{r}
# Add graphs for Returns % change - ACF
```

### Size Returns % change - ACF

Size Returns % change - ACF
```{r}
# Add graphs for Size Returns % change - ACF
```

Row {data-height=300}
-------------------------------------
    
### Returns % change - PACF

Returns % change - ACF
```{r}
# Add graphs for Returns % change - PACF
```

### Size Returns % change - PACF

Size Returns % change - ACF
```{r}
# Add graphs for Size Returns % change - PACF
```

Row {data-height=300}
-------------------------------------

### Data Insights

[Add data insights. Something about weekly vs monthly, tails, volatility, etc ]


```{r include=FALSE}
# --------------------- Correlation Sensitivity section -----------------------
```

Correlation Sensitivity {data-orientation=rows}
=====================================     
   
Row {data-height=700}
-------------------------------------

### nickel-copper correlation sensitivity to copper volatility

nickel-copper correlation sensitivity to copper volatility
```{r}
# Add graphs for nickel-copper correlation sensitivity to copper volatility
```

### copper-aluminum correlation sensitivity to aluminum volatility

copper-aluminum correlation sensitivity to aluminum volatility
```{r}
# Add graphs for copper-aluminum correlation sensitivity to aluminum volatility
```

### nickel-aluminum correlation sensitivity to aluminum volatility

nickel-aluminum correlation sensitivity to aluminum volatility
```{r}
# Add graphs for nickel-aluminum correlation sensitivity to aluminum volatility
```

Row {data-height=300}
-------------------------------------

### Data Insights

[Add data insights. Talk about variance, spikes, positive vs negative]

```{r include=FALSE}
# --------------------- Expected Shortfall section -----------------------
```

Expected Shortfall {data-orientation=rows}
=====================================     
   
Row {data-height=700}
-------------------------------------

### Nickel Shortfall

Nickel Shortfall
```{r}
# Add graphs for Nickel Shortfall
```

### Copper Shortfall

Copper Shortfall
```{r}
# Add graphs for Copper Shortfall
```

### Aluminum Shortfall

Aluminum Shortfall
```{r}
# Add graphs for Aluminum Shortfall
```

Row {data-height=300}
-------------------------------------

### Data Insights

[Add data insights. Which has highest risk, tails, expected shortfall values and value at risk values, what do they mean?]

```{r include=FALSE}
# --------------------- Losses section -----------------------
```

Losses {data-orientation=rows}
=====================================     
   
Row {data-height=700}
-------------------------------------

### Losses Graph

Losses Graph
```{r}
# Add graphs for Losses
```

Row {data-height=300}
-------------------------------------

### Data Insights

[Add data insights. What is the loss limit, VAR, ES, what do they mean?  What about the distribution?]

```{r include=FALSE}
# --------------------- Extremes section -----------------------
```

Extremes {data-orientation=rows}
=====================================     
   
Row {data-height=700}
-------------------------------------

### Estimated tail probabilities for confidence interval x

Estimated tail probabilities
```{r}
# Add graphs for Estimated tail probabilities for confidence interval x
```

### Estimated tail probabilities for confidence interval y

Estimated tail probabilities
```{r}
# Add graphs for Estimated tail probabilities for confidence interval y
```

Row {data-height=300}
-------------------------------------

### Data Insights

[Add data insights. Little about GPD, high thresholds vs low, what happens?  What is it more accurate?]

```{r include=FALSE}
# --------------------- Conclusion section -----------------------
```

Conclusion {data-orientation=rows}
=====================================     
   
Row {data-height=400}
-------------------------------------

### Skills and Tools

[List Skills and Tools]

### Data Insights

[Data Insights details]

Row {data-height=600}
-------------------------------------

### Business Remarks

[Add business remarks]